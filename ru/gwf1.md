project_path: "/web/fundamentals/_project.yaml"
book_path: "/web/fundamentals/_book.yaml"
description: Узнайте, кто участвует в экосистеме Web Payments, как они взаимодействуют
  друг с другом и как вы можете участвовать.

{# wf_published_on: 2018-09-10 #} {# wf_updated_on: 2019-02-22 #} {# wf_blink_components: Blink>Payments #}

# Как работает платежная экосистема {: .page-title }

{% include "web/_shared/contributors/agektmr.html" %} {% include "web/_shared/contributors/dgash.html" %}

Давайте посмотрим, как новая платежная экосистема работает с Web Payments.

## Анатомия веб-платежей

*Web Payments* включает в себя несколько веб-стандартов.

- **API запроса платежа: API запроса** [платежа](https://www.w3.org/TR/payment-request/) обеспечивает быструю и простую оплату через встроенный пользовательский интерфейс браузера. Он обеспечивает постоянный порядок оформления заказов, уменьшая при этом необходимость для пользователей вводить данные о доставке и оплате при каждом оформлении заказа. Узнайте , как это работает на высоком уровне на [Как работает запрос оплаты апи](/web/fundamentals/payments/basics/how-payment-request-api-works) или подробно на [Deep Dive в Компенсацию Request API](/web/fundamentals/payments/merchant-guide/deep-dive-into-payment-request) .
- **API обработчика платежей: API обработчика** [платежей](https://w3c.github.io/payment-handler/) открывает экосистему для поставщиков платежей, позволяя их веб-платежным приложениям выступать в качестве способов оплаты на веб-сайтах продавцов с помощью стандартного API запроса платежа.
- **Идентификаторы метода оплаты. Идентификаторы метода** [оплаты](https://w3c.github.io/payment-method-id/) определяют, как строки ( `basic-card` , `https://google.com/pay` и т. Д.) Могут использоваться для определения способа оплаты. Наряду со стандартизированными идентификаторами методов оплаты, он позволяет любому определить собственный метод оплаты с помощью идентификаторов методов оплаты на основе URL. Узнайте больше на [Основы метода оплаты](/web/fundamentals/payments/basics/payment-method-basics) .
- **Манифест метода оплаты: Манифест метода** [оплаты](https://w3c.github.io/payment-method-manifest/) определяет машиночитаемый файл манифеста, известный как манифест метода оплаты, описывающий, как метод оплаты участвует в экосистеме платежей и как такие файлы должны использоваться.

## Как работает процесс запроса платежа

Обычно в онлайн-транзакции участвуют четыре участника.

<table>
  <tr>
   <th style="width:30%;">игроки</th>
   <th style="width:50%;">Описание</th>
   <th style="width:20%;">Использование API</th>
  </tr>
  <tr>
   <td>Клиенты</td>
   <td>Пользователи, которые проходят через процесс оформления покупки, чтобы приобрести товары онлайн.</td>
   <td>N / A</td>
  </tr>
  <tr>
   <td>купечество</td>
   <td>Предприятия, продающие товары на своем сайте.</td>
   <td>API запроса платежа</td>
  </tr>
  <tr>
   <td>Платежные системы (PSP)</td>
   <td>Сторонние компании, которые на самом деле обрабатывают платежи, что включает в себя взимание платы с клиентов и кредитование продавцов. Альтернативно называется платежными шлюзами или платежными процессорами.</td>
   <td>API запроса платежа</td>
  </tr>
  <tr>
   <td>Платежные системы</td>
   <td>Сторонние компании, которые предоставляют приложения, которые обычно хранят учетные данные клиентов и по их авторизации, предоставляют их продавцам для обработки транзакции.</td>
   <td>API обработчика платежей</td>
  </tr>
</table>

<figure>
  <img src="../../images/payment-ecosystem/payment-interactions.png" alt="">
  <figcaption><i>Типичная последовательность событий при обработке оплаты кредитной картой в Интернете</i></figcaption>
</figure>

1. Клиент заходит на сайт продавца, добавляет товары в корзину и начинает процесс оформления заказа.
2. Продавцу нужны учетные данные клиента для обработки транзакции. Они представляют клиенту интерфейс запроса платежа, используя [**API запроса платежа**](/web/fundamentals/payments/basics/how-payment-request-api-works) . В интерфейсе пользователя перечислены различные способы оплаты, указанные [**в идентификаторах**](/web/fundamentals/payments/basics/payment-method-basics) способов оплаты. Способы оплаты могут включать номера кредитных карт, сохраненных в браузере, или обработчики платежей, такие как Google Pay, Samsung Pay и т. Д. Продавец может дополнительно запросить адрес доставки и контактную информацию клиента.
3. Если клиент выбирает способ оплаты, такой как Google Pay, Chrome запускает либо платформенное приложение для платформ, либо веб-приложение для платежей. Этот шаг полностью зависит от реализации обработчика платежей, основанной на **манифесте метода оплаты** . После того как клиент авторизует платеж, обработчик платежа возвращает ответ на API запроса платежа, который передает его на сайт продавца. (Если платеж является push-типом, таким как банковские переводы, криптовалюты, платеж уже обрабатывается, когда продавец получает ответ.)
4. Сайт продавца отправляет учетные данные платежа в PSP, чтобы обработать платеж и инициировать перевод средств. Как правило, проверка оплаты на стороне сервера также требуется.
5. PSP обрабатывает платеж, безопасно запрашивая перевод средств от банка клиента или эмитента кредитной карты продавцу, а затем возвращает результат успеха или неудачи на веб-сайт продавца.
6. Веб-сайт продавца уведомляет клиента об успехе или неудаче транзакции и отображает следующий шаг, например, отправку купленного товара.

![](../../images/payment-ecosystem/payment-transaction-process.png)

## Предостережение: PSP Reliance

Если вы являетесь продавцом и хотите принимать платежи по кредитным картам, PSP являются важным звеном в цепочке обработки платежей. Реализация API запроса платежа не устраняет необходимость в PSP.

Продавцы обычно полагаются на стороннюю PSP для выполнения обработки платежей по соображениям удобства и расходов. Это связано прежде всего с тем, что большинство PSP поддерживают соответствие стандарту [PCI DSS](https://en.wikipedia.org/wiki/Payment_Card_Industry_Data_Security_Standard) , стандарту информационной безопасности, который регулирует безопасность данных держателей карт.

Поскольку достижение и поддержание строгого соответствия PCI DSS может быть дорогостоящим и трудным, большинство продавцов считают, что использование совместимого PSP избегает прохождения процесса сертификации самостоятельно. Однако некоторые крупные и финансово устойчивые компании получают собственную сертификацию PCI DSS специально для того, чтобы избежать такой сторонней зависимости.

Это особенно важно, когда вы используете метод оплаты с помощью `basic-card` который возвращает основной номер счета (PAN) в качестве учетных данных, то есть номер, выбитый на карте. Для работы с JavaScript требуется соответствие [PCI SAQ A-EP](https://www.pcisecuritystandards.org/documents/PCI-DSS-v3_2-SAQ-A_EP.pdf) .

Таким образом, делегирование обработки платежей PSP, совместимому с PCI DSS, упрощает требования сайта продавца и обеспечивает целостность информации о платеже для клиента.

Если вы хотите использовать API запросов на оплату, но не имеете пропускной способности для совместимости с PCI SAQ A-EP, некоторые PSP предоставляют SDK, который использует API запросов на оплату.

### Список поддерживаемых платежных шлюзов

- [нашивка](https://stripe.com/docs/stripe-js/elements/payment-request-button)
- [Braintree](https://developers.braintreepayments.com/guides/payment-request/overview)
- [Bluesnap](https://developers.bluesnap.com/v8976-Basics/docs/payment-request-api)
- [Мы платим](https://developer.wepay.com/docs/mobile/payment-request-api)

Примечание. Отправляйте [запросы](https://github.com/google/WebFundamentals/pulls) на получение данных нам, если ваш платежный шлюз предоставляет SDK, который включает в себя API запроса на оплату, но не указан здесь.

## Следующий

Узнайте о полях и методах [API запроса платежа](/web/fundamentals/payments/basics/how-payment-request-api-works) в [разделе Как работает API запроса платежа](/web/fundamentals/payments/basics/how-payment-request-api-works) .

## Обратная связь {: #feedback }

{% include "web/_shared/helpful.html" %}
